<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>HotPot remote monitor</title>
    <script type="text/javascript" src="browser/jquery/jquery-2.2.3.min.js"></script>
    <script type="text/javascript" src="browser/js/edit_in_place.js"></script>
    <script type="text/javascript" src="browser/js/autoscale_graph.js"></script>
    <script type="text/javascript" src="common/BrowserStubs.js"></script>
    <script type="text/javascript" src="common/Utils.js"></script>
    <script type="text/javascript" src="common/Time.js"></script>
    <script type="text/javascript" src="common/Location.js"></script>

    <!-- Configuration: set global variables as follows:
         hotpot_ip to the IP address of the hotpot server
         hotpot_port to the port used by the hotpot server -->
    <script type="text/javascript" src="http://c-dot.co.uk/hotpot_ip.js">
    </script>
    <!-- Debug configuration, pointing at a development server -->
    <script type="text/javascript">
      hotpot_port = 13196;
      if (location.search.indexOf("DEBUG") > 0) {
          console.debug("Using DEBUG server");
          hotpot_ip = "127.0.0.1";
      }
    </script>

    <script type="text/javascript" src="browser/js/browser.js"></script>
    <link rel="stylesheet" href="browser/css/browser.css">
  </head>
  <body>
    <h1>Hotpot Monitor for <span id="server_url"></span></h1>
    <div id="comms_error"></div>

    <div><b>System Time:</b> <span data-field="time" data-type="date" class="monospace"></span></div>

    <div><b>Outside temperature:</b> <span data-field="env_temp" data-type="float" class="monospace"></span></div>
    <canvas id="temperature_canvas"></canvas>
    <canvas id="tip_canvas"></canvas>

    <h2>Thermostats</h2>
    <table id="thermostat" data-field="thermostat" width="100%">
    </table>

    <h2>Pins</h2>
    <table id="pin" data-field="pin">
    </table>

    <h2>Mobiles</h2>
    <div id="map"></div>
    <div id="mobile" data-field="mobile">
    </div>

    <h2>Rules</h2>
    <table data-field="rule">
      <thead>
        <tr>
          <th></th>
          <th></th>
          <th>Name</th>
          <th>Function</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <div class="add_rule">&#x2D32; Add new rule</div>

    <!-- Templates. The template is the content, not the container -->

    <!-- Thermostat Template -->
    <table class="template" data-template="thermostat">
      <tr>
        <td>
          <span data-field="name"></span>
          <br />
          <span data-field="temperature" data-type="float" class="monospace"></span>
        </td>
      </tr>
    </table>

    <!-- Rule-table template -->
    <table class="template">
      <tbody data-template="rule">
        <tr class="rule">
          <td>
            <span class="remove_rule" title="Delete rule">&#9746;</span>
          </td>
          <td>
            <span class="move_rule up" title="Move up">▲</span>
            <span class="move_rule down" title="Move down">▼</span>
          </td>
          <td data-field="name" class="editable monospace" valign="top"></td>
          <td>
            <pre data-field="test" class="editable monospace function" data-editable="area:true"></pre>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Pin template -->
    <table class="template" data-template="pin">
      <tr>
        <td data-field="name"></td>
        <td class="monospace" data-field="state">X</td>
        <td>
          Request
          <input type="radio" checked="checked" value="-1">None
          <input type="radio" value="0">OFF
          <input type="radio" value="1">ON
          <input type="radio" value="2">BOOST
        </td>
        <td data-field="request">
          <span class="showif source state until">
            <span data-field="source"></span>
            is requesting state
            <span class="monospace" data-field="state"></span>
            until
            <span class="monospace" data-field="until" data-type="date"></span>
          </span>
        </td>
      </tr>
    </table>

    <!-- Mobile template -->
    <div class="template" data-template="mobile">
      <div>
        <span class="marker" data-type="location" data-field="location"></span>
        <b data-field="name"></b>
        <span class="showif time_of_arrival">
          is expected home at
          <span data-field="time_of_arrival"></span>
        </span>
      </div>
    </div>
  </body>
</html>
